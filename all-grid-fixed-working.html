<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI导航站 - 修复版</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
    <style>
        /* 这里应该包含所有原始CSS样式 - 简化为关键部分 */
        /* 基本样式 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
            scroll-behavior: smooth;
            scroll-padding-top: 70px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* 保存按钮 - 最重要的CSS */
        .save-button {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 5;
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.2s ease, transform 0.2s ease;
        }
        
        .card-wrapper:hover .save-button {
            opacity: 1;
        }
        
        .save-button:hover {
            transform: scale(1.1);
            background-color: white;
        }
        
        .save-button.saved {
            background-color: #ff4081;
            opacity: 1;
        }
        
        .save-button.saved svg path {
            fill: white;
        }
        
        /* 工具栏 */
        .toolbar {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 100;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .toolbar-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toolbar-button:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        /* 提示消息 */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        /* 模态窗口 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 200;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 50px auto;
            max-width: 800px;
            width: 90%;
            border-radius: 8px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: modalIn 0.3s ease;
        }
        
        @keyframes modalIn {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            margin: 0;
            font-size: 20px;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #888;
        }
        
        .modal-body {
            padding: 20px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .modal-footer {
            padding: 15px 20px;
            text-align: right;
            border-top: 1px solid #eee;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .btn-secondary {
            background-color: #f1f1f1;
            color: #333;
        }
        
        .btn-secondary:hover {
            background-color: #e1e1e1;
        }
        
        /* 收藏列表样式 */
        .saved-tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .saved-tool-card {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            height: 120px;
        }
        
        .saved-tool-image {
            width: 120px;
            flex-shrink: 0;
        }
        
        .saved-tool-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .saved-tool-content {
            padding: 12px;
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
        .saved-tool-content h3 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }
        
        .saved-tool-content p {
            margin: 0 0 8px 0;
            font-size: 13px;
            color: #666;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        .saved-tool-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 8px;
        }
        
        .saved-tool-actions {
            margin-top: auto;
            display: flex;
            gap: 8px;
        }
        
        .visit-button {
            padding: 5px 10px;
            background-color: #1a73e8;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            text-decoration: none;
        }
        
        .remove-button {
            padding: 5px 10px;
            background-color: #f1f1f1;
            color: #333;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .empty-message {
            text-align: center;
            color: #666;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>AI导航站 - 修复版</h1>
        <p>这是一个简化版本，用于演示收藏功能。请点击AI工具卡片上的收藏按钮或右下角的收藏图标。</p>
        
        <!-- 示例卡片 -->
        <div class="cards-grid">
            <div class="card-wrapper">
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title">Claude</h3>
                        <p class="card-description">Anthropic开发的新一代AI助手，语言能力强大，擅长长文本处理和创意写作</p>
                        <a href="https://claude.ai" target="_blank" class="card-link">访问Claude</a>
                    </div>
                </div>
            </div>
            
            <div class="card-wrapper">
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title">ChatGPT</h3>
                        <p class="card-description">OpenAI开发的AI助手，拥有广泛的知识和应用能力，支持多种插件</p>
                        <a href="https://chat.openai.com" target="_blank" class="card-link">访问ChatGPT</a>
                    </div>
                </div>
            </div>
            
            <div class="card-wrapper">
                <div class="card">
                    <div class="card-content">
                        <h3 class="card-title">Midjourney</h3>
                        <p class="card-description">AI图像生成工具，以高质量艺术风格著称，可通过文本描述生成精美图像</p>
                        <a href="https://www.midjourney.com" target="_blank" class="card-link">访问Midjourney</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 收藏工具按钮 -->
    <div class="toolbar">
        <div class="toolbar-button" id="saved-tools-button">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
            </svg>
        </div>
    </div>
    
    <!-- 弹出消息 -->
    <div id="toast" class="toast"></div>
    
    <!-- 收藏工具模态窗口 -->
    <div id="savedToolsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>已收藏工具</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p class="empty-message">您还没有收藏任何工具。</p>
            </div>
        </div>
    </div>
    
    <!-- JavaScript 内联版本 - 避免引用外部文件 -->
    <script>
    // 保存工具功能的内联版本
    
    // 存储工具数组
    let savedTools = JSON.parse(localStorage.getItem('savedTools') || '[]');
    
    // 保存工具函数
    function saveTool(name, description, imageUrl, url, tags) {
        console.log('保存工具:', name);
        
        // 检查是否已保存
        const existingIndex = savedTools.findIndex(tool => tool.name === name);
        
        if (existingIndex !== -1) {
            // 已保存，则移除
            savedTools.splice(existingIndex, 1);
            updateSaveButtonStates();
            showToast(`${name} 已从收藏中移除`);
            localStorage.setItem('savedTools', JSON.stringify(savedTools));
            return false;
        } else {
            // 未保存，则添加
            const tool = {
                name,
                description,
                imageUrl,
                url,
                tags,
                savedAt: new Date().toISOString()
            };
            
            savedTools.push(tool);
            updateSaveButtonStates();
            showToast(`${name} 已添加到收藏`);
            localStorage.setItem('savedTools', JSON.stringify(savedTools));
            return true;
        }
    }
    
    // 显示保存的工具
    function showSavedTools() {
        console.log('显示收藏的工具');
        
        // 获取或创建模态窗口
        let modalContainer = document.getElementById('savedToolsModal');
        
        if (!modalContainer) {
            console.error('找不到模态窗口，创建一个新的');
            modalContainer = document.createElement('div');
            modalContainer.id = 'savedToolsModal';
            modalContainer.className = 'modal';
            document.body.appendChild(modalContainer);
        }
        
        // 构建模态内容
        let modalContent = `
            <div class="modal-content">
                <div class="modal-header">
                    <h2>已收藏工具</h2>
                    <span class="close-modal">&times;</span>
                </div>
                <div class="modal-body">
        `;
        
        if (savedTools.length === 0) {
            modalContent += `<p class="empty-message">您还没有收藏任何工具。</p>`;
        } else {
            modalContent += `<div class="saved-tools-grid">`;
            
            savedTools.forEach(tool => {
                modalContent += `
                    <div class="saved-tool-card">
                        <div class="saved-tool-image">
                            <img src="${tool.imageUrl || 'placeholder.png'}" alt="${tool.name}">
                        </div>
                        <div class="saved-tool-content">
                            <h3>${tool.name}</h3>
                            <p>${tool.description || ''}</p>
                            <div class="saved-tool-tags">
                                ${tool.tags ? tool.tags.map(tag => `<span class="tag">${tag}</span>`).join('') : ''}
                            </div>
                            <div class="saved-tool-actions">
                                <a href="${tool.url}" target="_blank" class="visit-button">访问网站</a>
                                <button class="remove-button" onclick="removeSavedTool('${tool.name}')">移除收藏</button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            modalContent += `</div>`;
        }
        
        modalContent += `
                </div>
            </div>
        `;
        
        modalContainer.innerHTML = modalContent;
        modalContainer.style.display = 'block';
        
        // 添加关闭按钮事件
        const closeButton = modalContainer.querySelector('.close-modal');
        if (closeButton) {
            closeButton.addEventListener('click', () => {
                modalContainer.style.display = 'none';
            });
        }
        
        // 点击外部区域关闭
        modalContainer.addEventListener('click', (event) => {
            if (event.target === modalContainer) {
                modalContainer.style.display = 'none';
            }
        });
    }
    
    // 移除已保存的工具
    function removeSavedTool(name) {
        console.log('移除工具:', name);
        
        const index = savedTools.findIndex(tool => tool.name === name);
        
        if (index !== -1) {
            savedTools.splice(index, 1);
            localStorage.setItem('savedTools', JSON.stringify(savedTools));
            updateSaveButtonStates();
            showToast(`${name} 已从收藏中移除`);
            
            // 重新显示收藏列表
            showSavedTools();
        }
    }
    
    // 更新保存按钮状态
    function updateSaveButtonStates() {
        console.log('更新保存按钮状态');
        
        const saveButtons = document.querySelectorAll('.save-button');
        
        saveButtons.forEach(button => {
            const cardElement = button.closest('.card-wrapper') || button.closest('.card');
            if (!cardElement) return;
            
            const nameElement = cardElement.querySelector('.card-title') || cardElement.querySelector('h3');
            if (!nameElement) return;
            
            const toolName = nameElement.textContent.trim();
            const isSaved = savedTools.some(tool => tool.name === toolName);
            
            if (isSaved) {
                button.classList.add('saved');
                button.setAttribute('title', '从收藏中移除');
                
                // 设置SVG填充
                const svgPath = button.querySelector('svg path');
                if (svgPath) svgPath.setAttribute('fill', 'white');
            } else {
                button.classList.remove('saved');
                button.setAttribute('title', '添加到收藏');
                
                // 清除SVG填充
                const svgPath = button.querySelector('svg path');
                if (svgPath) svgPath.setAttribute('fill', 'none');
            }
        });
    }
    
    // 显示提示消息
    function showToast(message, duration = 3000) {
        console.log('显示提示:', message);
        
        let toast = document.getElementById('toast');
        
        if (!toast) {
            toast = document.createElement('div');
            toast.id = 'toast';
            document.body.appendChild(toast);
        }
        
        toast.textContent = message;
        toast.className = 'toast show';
        
        setTimeout(() => {
            toast.className = toast.className.replace('show', '');
        }, duration);
    }
    
    // 为所有卡片添加保存按钮
    function addSaveButtonsToCards() {
        console.log('为卡片添加保存按钮');
        
        const cardWrappers = document.querySelectorAll('.card-wrapper');
        
        cardWrappers.forEach(wrapper => {
            // 检查是否已有保存按钮
            if (wrapper.querySelector('.save-button')) {
                return; // 已有按钮，跳过
            }
            
            const card = wrapper.querySelector('.card');
            if (!card) return;
            
            const titleEl = card.querySelector('.card-title') || card.querySelector('h3');
            if (!titleEl) return;
            
            // 创建保存按钮
            const saveButton = document.createElement('button');
            saveButton.className = 'save-button';
            saveButton.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                </svg>
            `;
            
            // 添加点击事件
            saveButton.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // 获取卡片信息
                const title = titleEl.textContent.trim();
                const descEl = card.querySelector('.card-description') || card.querySelector('p');
                const imageEl = card.querySelector('img');
                const linkEl = card.querySelector('a');
                
                const description = descEl ? descEl.textContent.trim() : '';
                const imageUrl = imageEl ? imageEl.src : '';
                const url = linkEl ? linkEl.href : '';
                
                // 获取标签
                const tags = [];
                const tagElements = card.querySelectorAll('.tag') || card.querySelectorAll('.hover-tag');
                tagElements.forEach(tag => tags.push(tag.textContent.trim()));
                
                // 保存工具
                saveTool(title, description, imageUrl, url, tags);
            });
            
            // 添加到卡片
            wrapper.appendChild(saveButton);
        });
        
        // 更新按钮状态
        updateSaveButtonStates();
    }
    
    // 设置工具栏按钮事件
    function setupToolbarButton() {
        console.log('设置工具栏按钮');
        
        const savedToolsButton = document.getElementById('saved-tools-button');
        if (savedToolsButton) {
            savedToolsButton.addEventListener('click', showSavedTools);
        }
    }
    
    // 在DOM加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM加载完成，初始化收藏功能');
        
        // 添加保存按钮到卡片
        addSaveButtonsToCards();
        
        // 设置工具栏按钮
        setupToolbarButton();
        
        console.log('收藏功能初始化完成');
    });
    </script>
</body>
</html> 